import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt
import matplotlib.font_manager as fm
import plotly.graph_objects as go
import os

font_path = "fonts/NotoSansJP-Regular.ttf"
jp_font = fm.FontProperties(fname=font_path) if os.path.exists(font_path) else None

st.set_page_config(page_title="ãƒªã‚¯ã‚¨ã‚¹ãƒˆåˆ†æ", layout="wide")
st.title("ğŸ“Š ãƒªã‚¯ã‚¨ã‚¹ãƒˆåˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰")

if "uploaded_files" not in st.session_state:
    st.session_state.uploaded_files = []
if "clear_triggered" not in st.session_state:
    st.session_state.clear_triggered = False

with st.sidebar:
    st.header("âš™ï¸ åˆ†æè¨­å®šï¼ˆå®Ÿè¡Œãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ï¼‰")
    threshold = st.number_input("åˆ¶é™å€¤", min_value=1, step=1, value=360)
    y_tick_label = st.selectbox("Yè»¸ç›®ç››", [1000, 500, 300, 200, 100, 50, 10, 5], index=5)
    if st.button("ğŸ§¹ å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒªã‚¢"):
        st.session_state.uploaded_files = []
        st.session_state.clear_triggered = False
        if "file_uploader" in st.session_state:
            del st.session_state["file_uploader"]
        st.experimental_rerun()